 resources:
#   - name: tr_ext_hook_2
#     type: ExternalWebhook
#     configuration:
#       webhookName: outgoing_hook
#       method: "POST"
#       path: "/resources"
  
  - name: tr_ext_webhook
    type: ExternalWebhook
    configuration:
      webhookName: slack_test
      method: "POST"
      path: "services/T0KNGPCD7/BLFA8C7JP/Se4EstETTZqvzb1QEiBzkb3l"
      parameters: "name=slack_test"
#       headers:
#         content-type: application/json
#          accept: $res_tr_ext_hook_webhookName_webhookURL
        
  - name: tr_int_hook
    type: InternalWebhook
    configuration:
      webhookName: incoming_hook

 pipelines:
  - name: tr_hooks_aplenty
    steps:
      - name: tr_start_by_hook
        type: Bash
        configuration:
#           inputResources:
#             - name: tr_int_hook
          outputResources:
            - name: tr_int_hook
            - name: tr_ext_webhook
        execution:
          onExecute:
            - printenv
            - set_payload tr_ext_webhook "{\"text\":\"Optional text that appears within the attachment\"}"
            - export tr_ext_hook_2_skipWebhook="true"
            - apt-get install -y tree
            - echo "Hello world"
          #  - echo ""
  
#       - name: tr_hook_connection
#         type: Bash
#         configuration:
#           inputResources:
#             - name: tr_int_hook
#         execution:
#           onExecute:
#             - apt-get install -y tree
#             - echo "Hello world"
#           #  - echo ""
